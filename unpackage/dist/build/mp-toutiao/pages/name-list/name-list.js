(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/name-list/name-list"],{"1b39":function(t,n,e){"use strict";e.r(n);var r=e("9471"),a=e.n(r);for(var o in r)"default"!==o&&function(t){e.d(n,t,(function(){return r[t]}))}(o);n["default"]=a.a},"1d04":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return r}));var r={uniNavBar:function(){return e.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(e.bind(null,"7d2b"))},likes:function(){return e.e("components/likes/likes").then(e.bind(null,"d83a"))}},a=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.poetryList,(function(n,e){var r=t.__get_orig(n),a=t.poetryList[e].content.split("");return{$orig:r,l0:a}})));t._isMounted||(t.e0=function(t){return this.control(10)}),t.$mp.data=Object.assign({},{$root:{l1:e}})},o=[]},"24dd":function(t,n,e){},"91f3":function(t,n,e){"use strict";var r=e("24dd"),a=e.n(r);a.a},9471:function(t,n,e){"use strict";(function(t,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return s(t)||f(t)||c(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,n){if(t){if("string"===typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,n):void 0}}function f(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return l(t)}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function d(t,n,e,r,a,o,i){try{var u=t[o](i),c=u.value}catch(f){return void e(f)}u.done?n(c):Promise.resolve(c).then(r,a)}function m(t){return function(){var n=this,e=arguments;return new Promise((function(r,a){var o=t.apply(n,e);function i(t){d(o,r,a,i,u,"next",t)}function u(t){d(o,r,a,i,u,"throw",t)}i(void 0)}))}}var p=function(){e.e("components/likes/likes").then(function(){return resolve(e("d83a"))}.bind(null,e)).catch(e.oe)},h={data:function(){return{formData:{},poetryList:[],page:"nameList"}},components:{likes:p},onLoad:function(t){this.formData=JSON.parse(t.formData),this.control(10)},computed:{highlightIndex:function(){var t=[];return this.poetryList.forEach((function(n){var e=n.name,r=n.content,a=r.indexOf(e.slice(1,2)),o=r.indexOf(e.slice(2,3));t.push({f:a,s:o})})),t}},methods:{goBack:function(){t.navigateBack({})},getName:function(){var n=this;return m(a.default.mark((function e(){var o,i,u,c,f,s,l,d,m,p,h;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"请稍等..."}),e.next=3,r.callFunction({name:"get_poetry",data:{type:n.formData.poetryType}});case 3:for(u in o=e.sent,i=o.result.data,[],i)c=i[u].content,f=i[u].content.split("。"),f=f.filter((function(t){return t&&t.trim()})),f=f[n.Random(0,f.length-1)],i[u].content=f,i[u].completeContent=c,s=/([\u4e00-\u9fa5])+/g,l=f.match(s).join("").split(""),d=n.randomNum(0,l.length),m=l[d[0]],p=l[d[1]],h=m+p,i[u].name=n.formData.firstName+h;return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))()},Random:function(t,n){return Math.round(Math.random()*(n-t))+t},randomNum:function(t,n){var e=Math.floor(Math.random()*(n-t))+t,r=Math.floor(Math.random()*(e-t+1))+t;return e===r?e++:e===n&&r--,[r,e]},filterName:function(t){var n=this;return m(a.default.mark((function t(){var e,o,u,c,f,s;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getName();case 2:return e=t.sent,o=[],e.forEach((function(t){o.push(t.name)})),t.next=7,r.callFunction({name:"get_gender",data:{names:o}});case 7:return u=t.sent,c=u.result.data,c.forEach((function(t,n){e[n].sex=t.gender})),"男"===n.formData.sex?e=e.filter((function(t){return"male"===t.sex})):"女"===n.formData.sex&&(e=e.filter((function(t){return"female"===t.sex}))),o=[],e.forEach((function(t){o.push(t.name)})),t.next=15,r.callFunction({name:"wuge",data:{names:o}});case 15:return f=t.sent,s=f.result.data,s.forEach((function(t,n){e[n].sanCaiWuGe=t})),"不限"!==n.formData.score&&(e=e.filter((function(t){return"中"===n.formData.score?t.sanCaiWuGe.totalSore>50:"高"===n.formData.score?t.sanCaiWuGe.totalSore>70:void 0}))),t.abrupt("return",new Promise((function(t,r){var a;e?((a=n.poetryList).push.apply(a,i(e)),t()):r("error")})));case 20:case"end":return t.stop()}}),t)})))()},control:function(n){var e=this;return m(a.default.mark((function r(){return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.poetryList=[];case 1:return r.next=3,e.filterName().then((function(r){e.poetryList=e.poetryList.slice(0,n),console.log(e.poetryList.length),t.hideLoading()})).catch((function(t){}));case 3:if(e.poetryList.length<n){r.next=1;break}case 4:case"end":return r.stop()}}),r)})))()},toDetail:function(n){var e=JSON.stringify(this.poetryList[n]),r=JSON.stringify({date:this.formData.date,lunar:this.formData.lunar});t.navigateTo({url:"../name-detail/name-detail?data="+e+"&type=qiming&date="+r})},toMyLikes:function(){t.navigateTo({url:"../my-likes/my-likes"})}}};n.default=h}).call(this,e("f266")["default"],e("a9ff")["default"])},a2d8:function(t,n,e){"use strict";(function(t){e("3448");r(e("66fd"));var n=r(e("fb71"));function r(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("f266")["createPage"])},fb71:function(t,n,e){"use strict";e.r(n);var r=e("1d04"),a=e("1b39");for(var o in a)"default"!==o&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("91f3");var i,u=e("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);n["default"]=c.exports}},[["a2d8","common/runtime","common/vendor"]]]);